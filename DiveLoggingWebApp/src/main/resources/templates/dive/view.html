<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      	  layout:decorate="~{layouts/diveViewTemplate}"
	    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
	<title>Dive View</title>
</head>


<body>
	<!-- MAIN -->
	<div id="diveContainer" layout:fragment="content">

		<div class="tab">
			<button class="tablinks" onclick="openTab(event, 'Overview')"  id="defaultOpen">Overview</button>
			<button class="tablinks" onclick="openTab(event, 'Environment')">Environment</button>
			<button class="tablinks" onclick="openTab(event, 'Details')">Details</button>
			<button class="tablinks" onclick="openTab(event, 'Observations')">Observations</button>
		</div>

		<!-- First Tab -->
		<div id="Overview" class="tabcontent">

			<h1 th:text="'Title: '+${dive.description}"></h1>
			<h3>ID</h3>
			<p th:text="${dive.id}"></p>
			<h3>First Name</h3>
			<p th:text="${dive.diveOwner.firstName}"></p>
			<h3>Last Name</h3>
			<p th:text="${dive.diveOwner.lastName}"></p>
			<h3>Owner Email</h3>
			<p th:text="${dive.diveOwner.email}"></p>
			<h3>Date</h3>
			<p th:text="${dive.date}"></p>
			<h3>Start Time</h3>
			<p th:text="${dive.startTime}"></p>
			<h3>End Time</h3>
			<p th:text="${dive.endTime}"></p>
			<h3>Duration</h3>
			<p th:text="${dive.diveDuration.toMinutes()}"></p>
			<h3>Latitude</h3>
			<p th:text="${dive.latitude}"></p>
			<h3>Longitude</h3>
			<p th:text="${dive.longitude}"></p>
			<h3>Country</h3>
			<p th:text="${dive.country}"></p>
			<h3>Location</h3>
			<p th:text="${dive.location}"></p>
			<h3>Detailed Location</h3>
			<p th:text="${dive.detailedLocation}"></p>

			<div id='map'></div>

		</div>

		<!-- Second Tab -->
		<div id="Environment" class="tabcontent">

			<h4>Weather</h4>
			<p th:text="${dive.weather}"></p>
			<h3>Visibility</h3>
			<p th:text="${dive.visibility}"></p>
			<h3>Air Temp</h3>
			<p th:text="${dive.airTemperature}"></p>
			<h3>Water Temp</h3>
			<p th:text="${dive.waterTemperature}"></p>
			<h3>Water Type</h3>
			<p th:text="${dive.waterType}"></p>
			<h3>Altitude</h3>
			<p th:text="${dive.altitude}"></p>
			<h3>Max Depth</h3>
			<p th:text="${dive.maxDepth}"></p>
		</div>

		<!-- Third Tab -->
		<div id="Details" class="tabcontent">

			<h3>No of Participants</h3>
			<p th:text="${dive.noOfParticipants}"></p>
			<h3>Participants List</h3>
			<p th:text="${dive.participantsList}"></p>
			<h3>Entry</h3>
			<p th:text="${dive.entry}"></p>
			<h3>Dive Suit</h3>
			<p th:text="${dive.diveSuit}"></p>
			<h3>Tank Type</h3>
			<p th:text="${dive.tankType}"></p>
			<h3>Gas Type</h3>
			<p th:text="${dive.gasType}"></p>
			<h3>Tank Size</h3>
			<p th:text="${dive.tankSize}"></p>
			<h3>Tank Start</h3>
			<p th:text="${dive.tankStart}"></p>
			<h3>Tank End</h3>
			<p th:text="${dive.tankEnd}"></p>
			<h3>Tank Usage</h3>
			<p th:text="${dive.tankUsage}"></p>
		</div>

		<!-- Fourth Tab -->
		<div id="Observations" class="tabcontent">

			<h3>Description</h3>
			<p th:text="${dive.description}"></p>
			<h3>Fauna</h3>
			<p th:text="${dive.faunaList}"></p>
			<h3>Flora</h3>
			<p th:text="${dive.floraList}"></p>
			<h3>ObservationsList</h3>
			<p th:text="${dive.observationsList}"></p>
		</div>

		<script th:inline="javascript">
			L.mapbox.accessToken = 'pk.eyJ1IjoiamFzb24zeXAiLCJhIjoiY2s3ZW4waXl2MHo0MzNucGF4NHQ5bXZ4diJ9.P93UqztpQcrq70aYz1XETQ';

			var longitude = [[${dive.longitude}]];
			var latitude = [[${dive.latitude}]];
			var description = [[${dive.description}]];
			var detailedLocation = [[${dive.detailedLocation}]];
			var diver = [[${dive.diveOwner.firstName}+' '+${dive.diveOwner.lastName}]];
			var date = [[${dive.date}]];
		

			var map = L.mapbox.map('map')
			    .setView([latitude, longitude], 9)
			    .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/streets-v11'));

			var marker = L.marker([latitude, longitude], {
				icon: L.mapbox.marker.icon({
					'marker-size': 'large',
					'marker-symbol': 'circle',
					'marker-color': '#4169E1'
				    	})
				})

			marker.bindPopup(description + "<br />" + diver + "<br />" + date + "<br />" + String(detailedLocation));
			marker.addTo(map);
		</script>


	</div>

	<!-- MAIN -->
</body>

</html>
